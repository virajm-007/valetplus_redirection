<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Opening ValetPlus...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="cache-control" content="no-cache" />
</head>

<body>
  Redirecting to ValetPlusâ€¦

  <script>
    (function () {
      const params = new URLSearchParams(window.location.search);
      const valetId = params.get("valetId") || "";
      const plate = params.get("plate") || "";

      const message =
        `Hello ValetPlus ðŸ‘‹\n\n` +
        `ðŸš— Vehicle No: ${plate}\n` +
        `ðŸŽ« Valet ID: ${valetId}`;

      const encodedMessage = encodeURIComponent(message);

      const valetDeepLink = `whatsapp://open?valetId=${valetId}`;
      const valetUniversalLink = `https://app.valetplus.net/open?valetId=${valetId}`;
      const whatsappDeepLink = `whatrgergsapp://send?phone=918180091425&text=${encodedMessage}`;
      const finalFallback = `https://valetplus.net`;

      const ua = navigator.userAgent || "";
      const isIOS = /iPhone|iPad|iPod/i.test(ua);
      const isAndroid = /Android/i.test(ua);

      let timeout;

      const goToWebsite = () => {
        window.location.href = finalFallback;
      };

      const tryWhatsApp = () => {
        window.location.href = whatsappDeepLink;

        // If WhatsApp is not installed â†’ go to website
        timeout = setTimeout(goToWebsite, 1200);
      };

      // Step 1: Try ValetPlus app
      if (isIOS) {
        window.location.href = valetUniversalLink;
        timeout = setTimeout(tryWhatsApp, 1800);
      } else if (isAndroid) {
        window.location.href = valetDeepLink;
        timeout = setTimeout(tryWhatsApp, 1800);
      } else {
        goToWebsite();
      }
    })();
  </script>
</body>
</html>
